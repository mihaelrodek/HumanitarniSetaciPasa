{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Programming\\\\ProjektPI\\\\oneclick\\\\IzvorniKod\\\\frontend\\\\oneclick-frontend\\\\src\\\\components\\\\screens\\\\walkConfirmation.screen.tsx\",\n    _s = $RefreshSig$();\n\nimport { Button } from '@material-ui/core';\nimport { addHours, format, startOfHour } from 'date-fns';\nimport React, { useState } from 'react';\nimport AnimalCard from '../basic/animal.card';\nimport WalkService from '../../services/walk.service';\nimport history from '../../misc/history';\nimport '../../styles/walk.css';\n\nfunction WalkConfirmationScreen({\n  location\n}) {\n  _s();\n\n  const [error, setError] = useState();\n  const walkRequest = location.state;\n\n  if (!walkRequest.startTime || !walkRequest.duration || !walkRequest.animals) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-page\",\n      children: \"Ne\\u0161to je po\\u0161lo po krivu prilikom prijave \\u0161etnje. Molim vas da poku\\u0161ate ponovo.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 13\n    }, this);\n  }\n\n  const startTime = startOfHour(Date.parse(walkRequest.startTime));\n  const duration = parseInt(walkRequest.duration);\n  const endTime = addHours(startTime, duration);\n  const animals = JSON.parse(walkRequest.animals);\n  const walkType = animals.length > 1 ? \"GROUP\" : \"SINGLE\";\n\n  const confirmWalk = () => {\n    const walk = {\n      startTime: startTime,\n      duration: duration,\n      animalIds: animals.map(a => a.id)\n    };\n    WalkService.postWalk(walk).then(response => {\n      if (response.status === 200) {\n        history.push('/walk/confirmed', {\n          success: \"true\"\n        });\n      }\n    }).catch(errors => {\n      var _errors$response;\n\n      if (((_errors$response = errors.response) === null || _errors$response === void 0 ? void 0 : _errors$response.status) === 400) setError(errors.response.data);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"walk\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: !!error && error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"walk-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Termin: \", format(startTime, \"dd.MM.yyyy. HH\"), \"-\", format(endTime, \"HH\"), \" sati\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"Tip \\u0161etnje: \", walkType === \"SINGLE\" ? \"Pojedinačna\" : \"Grupna\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: confirmWalk,\n          variant: \"outlined\",\n          children: \"Potvrdi \\u0161etnju\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: animals.map(a => {\n        return /*#__PURE__*/_jsxDEV(AnimalCard, {\n          animal: a,\n          selected: true\n        }, a.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 32\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n}\n\n_s(WalkConfirmationScreen, \"ohCv/qX5Qvv7Cjn7EU0ICsWDpi4=\");\n\n_c = WalkConfirmationScreen;\nexport default WalkConfirmationScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"WalkConfirmationScreen\");","map":{"version":3,"sources":["C:/Programming/ProjektPI/oneclick/IzvorniKod/frontend/oneclick-frontend/src/components/screens/walkConfirmation.screen.tsx"],"names":["Button","addHours","format","startOfHour","React","useState","AnimalCard","WalkService","history","WalkConfirmationScreen","location","error","setError","walkRequest","state","startTime","duration","animals","Date","parse","parseInt","endTime","JSON","walkType","length","confirmWalk","walk","animalIds","map","a","id","postWalk","then","response","status","push","success","catch","errors","data"],"mappings":"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","sourcesContent":["import {Button} from '@material-ui/core';\r\nimport {addHours, format, startOfHour} from 'date-fns';\r\nimport React, {useState} from 'react';\r\nimport {RouteComponentProps} from 'react-router';\r\nimport Animal from '../../models/animal.model';\r\nimport WalkRequest from '../../models/walkRequest.model';\r\nimport AnimalCard from '../basic/animal.card';\r\nimport WalkService from '../../services/walk.service';\r\nimport history from '../../misc/history';\r\nimport {AxiosError, AxiosResponse} from 'axios';\r\nimport '../../styles/walk.css';\r\n\r\ntype WalkConfirmationProps = {\r\n    startTime?: string | undefined,\r\n    duration?: string | undefined,\r\n    animals?: string | undefined,\r\n}\r\n\r\nfunction WalkConfirmationScreen({location}: RouteComponentProps<WalkConfirmationProps>) {\r\n    const [error, setError] = useState();\r\n\r\n    const walkRequest = location.state as WalkConfirmationProps;\r\n\r\n    if (!walkRequest.startTime || !walkRequest.duration || !walkRequest.animals) {\r\n        return (\r\n            <div className={\"container-page\"}>\r\n                Nešto je pošlo po krivu prilikom prijave šetnje. Molim vas da pokušate ponovo.\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const startTime = startOfHour(Date.parse(walkRequest.startTime));\r\n    const duration = parseInt(walkRequest.duration);\r\n    const endTime = addHours(startTime, duration);\r\n    const animals = JSON.parse(walkRequest.animals) as Animal[];\r\n    const walkType = animals.length > 1 ? \"GROUP\" : \"SINGLE\";\r\n\r\n    const confirmWalk = () => {\r\n        const walk: WalkRequest = {\r\n            startTime: startTime,\r\n            duration: duration,\r\n            animalIds: animals.map(a => a.id)\r\n        }\r\n\r\n        WalkService.postWalk(walk)\r\n            .then((response: AxiosResponse) => {\r\n                if (response.status === 200) {\r\n                    history.push('/walk/confirmed', {success: \"true\"});\r\n                }\r\n            })\r\n            .catch((errors: AxiosError) => {\r\n                if (errors.response?.status === 400)\r\n                    setError(errors.response.data);\r\n            });\r\n    }\r\n\r\n    return (\r\n        <div className=\"walk\">\r\n            <div>\r\n                {!!error && error}\r\n            </div>\r\n            <div className=\"walk-header\">\r\n                <div>\r\n                    Termin: {format(startTime, \"dd.MM.yyyy. HH\")}-{format(endTime, \"HH\")} sati\r\n                </div>\r\n                <div>\r\n                    Tip šetnje: {walkType === \"SINGLE\" ? \"Pojedinačna\" : \"Grupna\"}\r\n                </div>\r\n                <div>\r\n                    <Button onClick={confirmWalk} variant=\"outlined\">Potvrdi šetnju</Button>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                {\r\n                    animals.map(a => {\r\n                        return <AnimalCard key={a.id} animal={a} selected={true}/>\r\n                    })\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default WalkConfirmationScreen;\r\n"]},"metadata":{},"sourceType":"module"}