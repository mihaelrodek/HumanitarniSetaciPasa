{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Programming\\\\ProjektPI\\\\oneclick\\\\IzvorniKod\\\\frontend\\\\oneclick-frontend\\\\src\\\\components\\\\screens\\\\walkConfirmation.screen.tsx\";\nimport { Button } from '@material-ui/core';\nimport { addHours, format, startOfHour } from 'date-fns';\nimport React from 'react';\nimport AnimalCard from '../basic/animal.card';\nimport WalkService from '../../services/walk.service';\nimport history from '../../misc/history';\n\nfunction WalkConfirmationScreen({\n  location\n}) {\n  const walkRequest = location.state;\n\n  if (!walkRequest.startTime || !walkRequest.duration || !walkRequest.animals) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-page\",\n      children: \"Ne\\u0161to je po\\u0161lo po krivu prilikom prijave \\u0161etnje. Molim vas da poku\\u0161ate ponovo.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 13\n    }, this);\n  }\n\n  const startTime = startOfHour(Date.parse(walkRequest.startTime));\n  const duration = parseInt(walkRequest.duration);\n  const endTime = addHours(startTime, duration);\n  const animals = JSON.parse(walkRequest.animals);\n  const walkType = animals.length > 1 ? \"GROUP\" : \"SINGLE\";\n\n  const confirmWalk = () => {\n    const walk = {\n      startTime: startTime,\n      duration: duration,\n      animalIds: animals.map(a => a.id)\n    };\n    WalkService.postWalk(walk).then(response => {\n      if (response.status === 200) {\n        history.push('/walk/confirmed', {\n          success: \"true\"\n        });\n      }\n    }).catch(errors => {});\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Termin: \", format(startTime, \"dd.MM.yyyy. HH\"), \"-\", format(endTime, \"HH\"), \" sati\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Tip \\u0161etnje: \", walkType === \"SINGLE\" ? \"Pojedinačna\" : \"Grupna\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: confirmWalk,\n          variant: \"outlined\",\n          children: \"Potvrdi \\u0161etnju\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: animals.map(a => {\n        return /*#__PURE__*/_jsxDEV(AnimalCard, {\n          animal: a,\n          selected: true\n        }, a.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 32\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n}\n\n_c = WalkConfirmationScreen;\nexport default WalkConfirmationScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"WalkConfirmationScreen\");","map":{"version":3,"sources":["C:/Programming/ProjektPI/oneclick/IzvorniKod/frontend/oneclick-frontend/src/components/screens/walkConfirmation.screen.tsx"],"names":["Button","addHours","format","startOfHour","React","AnimalCard","WalkService","history","WalkConfirmationScreen","location","walkRequest","state","startTime","duration","animals","Date","parse","parseInt","endTime","JSON","walkType","length","confirmWalk","walk","animalIds","map","a","id","postWalk","then","response","status","push","success","catch","errors"],"mappings":"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","sourcesContent":["import { Button } from '@material-ui/core';\r\nimport { addHours, format, startOfHour } from 'date-fns';\r\nimport React from 'react';\r\nimport { RouteComponentProps } from 'react-router';\r\nimport Animal from '../../models/animal.model';\r\nimport WalkRequest from '../../models/walkRequest.model';\r\nimport AnimalCard from '../basic/animal.card';\r\nimport WalkService from '../../services/walk.service';\r\nimport history from '../../misc/history';\r\n\r\ntype WalkConfirmationProps = {\r\n    startTime?: string | undefined,\r\n    duration?: string | undefined,\r\n    animals?: string | undefined,\r\n}\r\n\r\nfunction WalkConfirmationScreen({ location }: RouteComponentProps<WalkConfirmationProps>) {\r\n\r\n    const walkRequest = location.state as WalkConfirmationProps;\r\n\r\n    if (!walkRequest.startTime || !walkRequest.duration || !walkRequest.animals) {\r\n        return (\r\n            <div className={\"container-page\"}>\r\n                Nešto je pošlo po krivu prilikom prijave šetnje. Molim vas da pokušate ponovo.\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const startTime = startOfHour(Date.parse(walkRequest.startTime));\r\n    const duration = parseInt(walkRequest.duration);\r\n    const endTime = addHours(startTime, duration);\r\n    const animals = JSON.parse(walkRequest.animals) as Animal[];\r\n    const walkType = animals.length > 1 ? \"GROUP\" : \"SINGLE\";\r\n\r\n    const confirmWalk = () => {\r\n        const walk: WalkRequest = {\r\n            startTime: startTime,\r\n            duration: duration,\r\n            animalIds: animals.map(a => a.id)\r\n        }\r\n\r\n        WalkService.postWalk(walk)\r\n            .then(response => {\r\n                if (response.status === 200) {\r\n                    history.push('/walk/confirmed', {success: \"true\"});\r\n                }\r\n            })\r\n            .catch(errors => {\r\n\r\n            });\r\n    }\r\n\r\n    return (\r\n        <div className={\"container-page\"}>\r\n            <div>\r\n                <div>\r\n                    <div>\r\n                        Termin: {format(startTime, \"dd.MM.yyyy. HH\")}-{format(endTime, \"HH\")} sati\r\n                    </div>\r\n                    <div>\r\n                        Tip šetnje: {walkType === \"SINGLE\" ? \"Pojedinačna\" : \"Grupna\"}\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <Button onClick={confirmWalk} variant=\"outlined\">Potvrdi šetnju</Button>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                {\r\n                    animals.map(a => {\r\n                        return <AnimalCard key={a.id} animal={a} selected={true} />\r\n                    })\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default WalkConfirmationScreen;\r\n"]},"metadata":{},"sourceType":"module"}