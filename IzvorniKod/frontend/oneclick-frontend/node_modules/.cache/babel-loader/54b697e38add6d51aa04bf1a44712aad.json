{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Programming\\\\ProjektPI\\\\oneclick\\\\IzvorniKod\\\\frontend\\\\oneclick-frontend\\\\src\\\\components\\\\screens\\\\walkConfirmation.screen.tsx\",\n    _s = $RefreshSig$();\n\nimport { Button, makeStyles } from '@material-ui/core';\nimport { addHours, format, startOfHour } from 'date-fns';\nimport React from 'react';\nimport AnimalCard from '../basic/animal.card';\nimport WalkService from '../../services/walk.service';\nimport history from '../../misc/history';\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: 'fit-content',\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: theme.palette.background.paper,\n    color: theme.palette.text.secondary\n  }\n}));\n\nfunction WalkConfirmationScreen({\n  location\n}) {\n  _s();\n\n  const classes = useStyles();\n  const walkRequest = location.state;\n\n  if (!walkRequest.startTime || !walkRequest.duration || !walkRequest.animals) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-page\",\n      children: \"Ne\\u0161to je po\\u0161lo po krivu prilikom prijave \\u0161etnje. Molim vas da poku\\u0161ate ponovo.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 13\n    }, this);\n  }\n\n  const startTime = startOfHour(Date.parse(walkRequest.startTime));\n  const duration = parseInt(walkRequest.duration);\n  const endTime = addHours(startTime, duration);\n  const animals = JSON.parse(walkRequest.animals);\n  const walkType = animals.length > 1 ? \"GROUP\" : \"SINGLE\";\n\n  const confirmWalk = () => {\n    const walk = {\n      startTime: startTime,\n      duration: duration,\n      animalIds: animals.map(a => a.id)\n    };\n    WalkService.postWalk(walk).then(response => {\n      if (response.status === 200) {\n        history.push('/walk/confirmed', {\n          success: \"true\"\n        });\n      }\n    }).catch(errors => {});\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"register-walk\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Termin: \", format(startTime, \"dd.MM.yyyy. HH\"), \"-\", format(endTime, \"HH\"), \" sati\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Tip \\u0161etnje: \", walkType === \"SINGLE\" ? \"Pojedinačna\" : \"Grupna\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            onClick: confirmWalk,\n            variant: \"outlined\",\n            children: \"Potvrdi \\u0161etnju\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: animals.map(a => {\n        return /*#__PURE__*/_jsxDEV(AnimalCard, {\n          animal: a,\n          selected: true\n        }, a.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 32\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 9\n  }, this);\n}\n\n_s(WalkConfirmationScreen, \"8g5FPXexvSEOsxdmU7HicukHGqY=\", false, function () {\n  return [useStyles];\n});\n\n_c = WalkConfirmationScreen;\nexport default WalkConfirmationScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"WalkConfirmationScreen\");","map":{"version":3,"sources":["C:/Programming/ProjektPI/oneclick/IzvorniKod/frontend/oneclick-frontend/src/components/screens/walkConfirmation.screen.tsx"],"names":["Button","makeStyles","addHours","format","startOfHour","React","AnimalCard","WalkService","history","useStyles","theme","root","width","borderRadius","shape","backgroundColor","palette","background","paper","color","text","secondary","WalkConfirmationScreen","location","classes","walkRequest","state","startTime","duration","animals","Date","parse","parseInt","endTime","JSON","walkType","length","confirmWalk","walk","animalIds","map","a","id","postWalk","then","response","status","push","success","catch","errors"],"mappings":"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","sourcesContent":["import {Button, makeStyles} from '@material-ui/core';\r\nimport {addHours, format, startOfHour} from 'date-fns';\r\nimport React from 'react';\r\nimport {RouteComponentProps} from 'react-router';\r\nimport Animal from '../../models/animal.model';\r\nimport WalkRequest from '../../models/walkRequest.model';\r\nimport AnimalCard from '../basic/animal.card';\r\nimport WalkService from '../../services/walk.service';\r\nimport history from '../../misc/history';\r\n\r\ntype WalkConfirmationProps = {\r\n    startTime?: string | undefined,\r\n    duration?: string | undefined,\r\n    animals?: string | undefined,\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    root: {\r\n        width: 'fit-content',\r\n        borderRadius: theme.shape.borderRadius,\r\n        backgroundColor: theme.palette.background.paper,\r\n        color: theme.palette.text.secondary,\r\n    },\r\n}));\r\n\r\nfunction WalkConfirmationScreen({location}: RouteComponentProps<WalkConfirmationProps>) {\r\n    const classes = useStyles();\r\n\r\n    const walkRequest = location.state as WalkConfirmationProps;\r\n\r\n    if (!walkRequest.startTime || !walkRequest.duration || !walkRequest.animals) {\r\n        return (\r\n            <div className={\"container-page\"}>\r\n                Nešto je pošlo po krivu prilikom prijave šetnje. Molim vas da pokušate ponovo.\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const startTime = startOfHour(Date.parse(walkRequest.startTime));\r\n    const duration = parseInt(walkRequest.duration);\r\n    const endTime = addHours(startTime, duration);\r\n    const animals = JSON.parse(walkRequest.animals) as Animal[];\r\n    const walkType = animals.length > 1 ? \"GROUP\" : \"SINGLE\";\r\n\r\n    const confirmWalk = () => {\r\n        const walk: WalkRequest = {\r\n            startTime: startTime,\r\n            duration: duration,\r\n            animalIds: animals.map(a => a.id)\r\n        }\r\n\r\n        WalkService.postWalk(walk)\r\n            .then(response => {\r\n                if (response.status === 200) {\r\n                    history.push('/walk/confirmed', {success: \"true\"});\r\n                }\r\n            })\r\n            .catch(errors => {\r\n\r\n            });\r\n    }\r\n\r\n\r\n    return (\r\n        <div className={\"container-page\"}>\r\n            <div>\r\n                <div className=\"register-walk\">\r\n                    <div>\r\n                        Termin: {format(startTime, \"dd.MM.yyyy. HH\")}-{format(endTime, \"HH\")} sati\r\n\r\n                    </div>\r\n                    <div>\r\n                        Tip šetnje: {walkType === \"SINGLE\" ? \"Pojedinačna\" : \"Grupna\"}\r\n                    </div>\r\n\r\n                    <div>\r\n                        <Button onClick={confirmWalk} variant=\"outlined\">Potvrdi šetnju</Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div>\r\n                {\r\n                    animals.map(a => {\r\n                        return <AnimalCard key={a.id} animal={a} selected={true}/>\r\n                    })\r\n                }\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default WalkConfirmationScreen;\r\n"]},"metadata":{},"sourceType":"module"}