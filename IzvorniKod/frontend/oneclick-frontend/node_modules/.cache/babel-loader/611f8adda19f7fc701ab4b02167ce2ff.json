{"ast":null,"code":"import api from './api.service';\nimport getHostName from \"./host.service\";\nimport history from './../misc/history';\n\nfunction getLoginRequest(username, password) {\n  return api.post(getHostName(\"/auth/login\"), {\n    username: username,\n    password: password\n  });\n}\n\nasync function login(username, password) {\n  let result = {};\n  let error = null;\n  await getLoginRequest(username, password).then(response => {\n    localStorage.setItem(\"user\", JSON.stringify(response.data));\n    result = response;\n  }, errors => {\n    error = errors.response;\n  });\n\n  if (error !== null) {\n    return error;\n  }\n\n  return result;\n}\n\nfunction logout() {\n  let value = localStorage.getItem(\"user\");\n\n  if (value) {\n    localStorage.removeItem(\"user\");\n    history.push(\"/\");\n    window.location.reload(false);\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction isLoggedIn() {\n  let value = localStorage.getItem(\"user\");\n  return !!value;\n}\n\nconst LoginService = {\n  login: login,\n  logout,\n  isLoggedIn\n};\nexport default LoginService;","map":{"version":3,"sources":["C:/Programming/ProjektPI/oneclick/IzvorniKod/frontend/oneclick-frontend/src/services/login.service.ts"],"names":["api","getHostName","history","getLoginRequest","username","password","post","login","result","error","then","response","localStorage","setItem","JSON","stringify","data","errors","logout","value","getItem","removeItem","push","window","location","reload","isLoggedIn","LoginService"],"mappings":"AAEA,OAAOA,GAAP,MAAgB,eAAhB;AACA,OAAOC,WAAP,MAAwB,gBAAxB;AACA,OAAOC,OAAP,MAAoB,mBAApB;;AAEA,SAASC,eAAT,CAAyBC,QAAzB,EAA2CC,QAA3C,EAA6D;AACzD,SAAOL,GAAG,CAACM,IAAJ,CAASL,WAAW,CAAC,aAAD,CAApB,EAAqC;AACxCG,IAAAA,QAAQ,EAAEA,QAD8B;AAExCC,IAAAA,QAAQ,EAAEA;AAF8B,GAArC,CAAP;AAIH;;AAED,eAAeE,KAAf,CAAqBH,QAArB,EAAuCC,QAAvC,EAAyD;AACrD,MAAIG,MAAM,GAAG,EAAb;AACA,MAAIC,KAAK,GAAG,IAAZ;AAEA,QAAMN,eAAe,CAACC,QAAD,EAAWC,QAAX,CAAf,CAAoCK,IAApC,CAAyCC,QAAQ,IAAI;AACvDC,IAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeJ,QAAQ,CAACK,IAAxB,CAA7B;AACAR,IAAAA,MAAM,GAAGG,QAAT;AACH,GAHK,EAGFM,MAAD,IAAY;AACXR,IAAAA,KAAK,GAAGQ,MAAM,CAACN,QAAf;AACH,GALK,CAAN;;AAOA,MAAIF,KAAK,KAAK,IAAd,EAAoB;AAChB,WAAOA,KAAP;AACH;;AAED,SAAOD,MAAP;AACH;;AAED,SAASU,MAAT,GAAkB;AACd,MAAIC,KAAK,GAAGP,YAAY,CAACQ,OAAb,CAAqB,MAArB,CAAZ;;AAEA,MAAID,KAAJ,EAAW;AACPP,IAAAA,YAAY,CAACS,UAAb,CAAwB,MAAxB;AACAnB,IAAAA,OAAO,CAACoB,IAAR,CAAa,GAAb;AACAC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,KAAvB;AACA,WAAO,IAAP;AACH,GALD,MAKO;AACH,WAAO,KAAP;AACH;AACJ;;AAED,SAASC,UAAT,GAAsB;AAClB,MAAIP,KAAK,GAAGP,YAAY,CAACQ,OAAb,CAAqB,MAArB,CAAZ;AAEA,SAAO,CAAC,CAACD,KAAT;AACH;;AAED,MAAMQ,YAAY,GAAG;AAACpB,EAAAA,KAAK,EAAEA,KAAR;AAAeW,EAAAA,MAAf;AAAuBQ,EAAAA;AAAvB,CAArB;AACA,eAAeC,YAAf","sourcesContent":["import { AxiosResponse } from 'axios';\r\nimport UserDetails from '../models/userDetails.model';\r\nimport api from './api.service'\r\nimport getHostName from \"./host.service\";\r\nimport history from './../misc/history';\r\n\r\nfunction getLoginRequest(username: string, password: string) {\r\n    return api.post(getHostName(\"/auth/login\"), {\r\n        username: username,\r\n        password: password\r\n    });\r\n}   \r\n\r\nasync function login(username: string, password: string) {\r\n    let result = {};\r\n    let error = null;\r\n\r\n    await getLoginRequest(username, password).then(response => {\r\n        localStorage.setItem(\"user\", JSON.stringify(response.data));\r\n        result = response;\r\n    }, (errors) => {\r\n        error = errors.response;\r\n    });\r\n\r\n    if (error !== null) {\r\n        return error as AxiosResponse;\r\n    }\r\n\r\n    return result as AxiosResponse<UserDetails>;\r\n}\r\n\r\nfunction logout() {\r\n    let value = localStorage.getItem(\"user\");\r\n\r\n    if (value) {\r\n        localStorage.removeItem(\"user\");\r\n        history.push(\"/\");\r\n        window.location.reload(false);\r\n        return true;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\nfunction isLoggedIn() {\r\n    let value = localStorage.getItem(\"user\");\r\n    \r\n    return !!value;\r\n}\r\n\r\nconst LoginService = {login: login, logout, isLoggedIn};\r\nexport default LoginService;"]},"metadata":{},"sourceType":"module"}